<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Einstellungen</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{background:#000;color:#FFD700;margin:0;padding:20px;font-family:Arial;text-align:center}
    input, select, button{width:90%;padding:15px;margin:10px;font-size:1.2em;border-radius:12px}
    input, select{background:#333;color:#FFD700;border:none}
    button{background:#FFD700;color:#000;border:none}
    .logo-row{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin:20px}
    .logo-item{text-align:center;font-size:0.9em}
    .logo-item img{width:80px;height:80px}
  </style>
</head>
<body>
  <h1>Einstellungen</h1>

  <select id="model" onchange="showFields()">
    <option value="">-- Kamera wählen --</option>
    <option value="local">Lokale Webcam</option>
    <option value="raspberry">Raspberry Pi</option>
    <option value="tapo">TP-Link Tapo</option>
    <option value="reolink">Reolink</option>
    <option value="instar">INSTAR</option>
    <option value="hikvision">Hikvision</option>
    <option value="custom">Andere RTSP/MJPEG</option>
  </select>

  <div class="logo-row">
    <div class="logo-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0NSIgZmlsbD0iI2MzMmYyZiIvPjxwYXRoIGQ9Ik01MCAyMHY2MG0tMjUgLTQ1aDUwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMTUiLz48L3N2Zz4="><br>Raspberry Pi</div>
    <div class="logo-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iIzAwY2NmZiIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1zaXplPSI0MCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlI8L3RleHQ+PC9zdmc+"><br>Reolink</div>
    <div class="logo-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IHg9IjUwIiB5PSI2MCIgZm9udC1zaXplPSI1MCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkk8L3RleHQ+PC9zdmc+"><br>INSTAR</div>
    <div class="logo-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmNjYwMCIvPjx0ZXh0IHg9IjUwIiB5PSI2MCIgZm9udC1zaXplPSI0MCIgZmlsbD0iIzAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SDwvdGV4dD48L3N2Zz4="><br>Hikvision</div>
    <div class="logo-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0NSIgZmlsbD0iIzQwY2Q0MCIvPjx0ZXh0IHg9IjUwIiB5PSI2MCIgZm9udC1zaXplPSI0MCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlQ8L3RleHQ+PC9zdmc+"><br>Tapo</div>
  </div>

  <div id="fields" style="display:none">
    <input id="ip" placeholder="IP (z.B. 192.168.1.100)">
    <input id="user" placeholder="Benutzer (meist admin)" value="admin">
    <input id="pass" type="password" placeholder="Passwort">
    <input id="customUrl" placeholder="RTSP/MJPEG-URL (bei Custom)">
    <input id="cameraName" placeholder="Name dieser Kamera (z.B. Stock Eiche)">
    <label><input type="checkbox" id="sms"> SMS-Alarme für diese Kamera</label>
    <button onclick="save()">Speichern & zurück</button>
  </div>

  <script>
    function showFields() {
      document.getElementById('fields').style.display = model.value ? 'block' : 'none';
    }

    function save() {
      const m = model.value;
      let url = "";
      if (m === "local" || m === "raspberry") url = "local";
      if (m === "tapo") url = `rtsp://${user.value}:${pass.value}@${ip.value}:554/stream1`;
      if (m === "reolink") url = `http://${ip.value}/cgi-bin/api.cgi?cmd=Snap&channel=0&rs=wow&user=${user.value}&password=${pass.value}`;
      if (m === "instar") url = `http://${ip.value}/tmpfs/snap.jpg`;
      if (m === "hikvision") url = `rtsp://${user.value}:${pass.value}@${ip.value}:554/Streaming/Channels/101`;
      if (m === "custom") url = customUrl.value;

      localStorage.setItem('cameraUrl', url);
      localStorage.setItem('cameraName', cameraName.value || "Kamera");
      localStorage.setItem('wantSMS', sms.checked);
      alert("Kamera gespeichert!");
      location.href = "index.html";
    }

    // Beim Laden prüfen
    if (localStorage.getItem('cameraUrl')) {
      document.body.innerHTML = "<h1>Kamera eingerichtet</h1><button onclick=\"location='index.html'\">Zurück</button>";
    }
  </script>
</body>
</html>
